(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d1ffb7e6"],{"0ae5":function(t,e,s){},"7ef4":function(t,e,s){"use strict";var i=s("0ae5"),o=s.n(i);o.a},bd85:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"info-category"},[s("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.addFirstItem()}}},[t._v("添加一级分类")]),s("div",{staticClass:"hr"}),s("el-row",{attrs:{gutter:30}},[s("el-col",{attrs:{span:12}},[s("div",{staticClass:"category-wrap"},t._l(t.categoryData,(function(e,i){return s("div",{key:i,staticClass:"category-item"},[s("div",{staticClass:"first-item",on:{click:function(e){return t.toggleScecondItem(i)}}},[s("svg-icon",{staticClass:"icon",attrs:{"icon-class":e.iconName}}),s("h4",[t._v(t._s(e.category_name))]),s("div",{staticClass:"button-group"},[s("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(e){return e.stopPropagation(),t.firstItemEdit(i)}}},[t._v("编辑")]),s("el-button",{attrs:{size:"mini",type:"success",round:""},on:{click:function(e){return e.stopPropagation(),t.firstItemAddChildren(i)}}},[t._v("添加子级")]),s("el-button",{attrs:{size:"mini",round:""},on:{click:function(s){return s.stopPropagation(),t.deleteCategory(e.id)}}},[t._v("删除")])],1)],1),s("ul",{directives:[{name:"show",rawName:"v-show",value:e.secondFlag,expression:"firstItem.secondFlag"}],staticClass:"second-item"},t._l(e.children,(function(e,o){return s("li",{key:o},[t._v(" "+t._s(e.category_name)+" "),s("div",{staticClass:"button-group"},[s("el-button",{attrs:{size:"mini",type:"danger",round:""},on:{click:function(e){return e.stopPropagation(),t.secondItemEdit(i,o)}}},[t._v("编辑")]),s("el-button",{attrs:{size:"mini",round:""},on:{click:function(s){return s.stopPropagation(),t.deleteCategory(e.id)}}},[t._v("删除")])],1)])})),0)])})),0)]),s("el-col",{staticClass:"category-edit",attrs:{span:12}},[s("h4",{staticClass:"title"},[t._v("分类编辑")]),s("el-form",{ref:"editForm",staticClass:"edit-form",attrs:{"label-position":"left","label-width":"120px",model:t.editForm}},[s("el-form-item",{attrs:{label:"一级分类名称 :"}},[s("el-input",{attrs:{disabled:t.editForm.disabled1},model:{value:t.editForm.firstItem,callback:function(e){t.$set(t.editForm,"firstItem",e)},expression:"editForm.firstItem"}})],1),s("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.isShowSecCategory,expression:"isShowSecCategory"}],attrs:{label:"二级分类名称 :"}},[s("el-input",{attrs:{disabled:t.editForm.disabled2},model:{value:t.editForm.secondItem,callback:function(e){t.$set(t.editForm,"secondItem",e)},expression:"editForm.secondItem"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.editFormInfo()}}},[t._v("确定")])],1)],1)],1)],1)],1)},o=[],a=s("4e79"),r=s("4837"),n={name:"InfoCategory",component:{SvgIcon:a["a"]},data:function(){return{categoryData:[],isShowSecCategory:!0,editForm:{disabled1:!0,disabled2:!0,firstItem:"",secondItem:""},currentIndex:0,currentId:0,buttonType:""}},methods:{toggleScecondItem:function(t){this.categoryData[t].secondFlag=!this.categoryData[t].secondFlag,this.categoryData[t].iconName="subtract"===this.categoryData[t].iconName?"plus":"subtract"},showSeccategory:function(t){this.isShowSecCategory=Boolean(t)},disabledAll:function(t){this.editForm.disabled1=Boolean(t),this.editForm.disabled2=Boolean(t)},disabled1:function(t){this.editForm.disabled1=Boolean(t),this.editForm.disabled2=!1},addFirstItem:function(){this.disabledAll(!1),this.showSeccategory(!1),this.editForm.firstItem="",this.buttonType="addFirstItem"},firstItemAddChildren:function(t){this.buttonType="addChildren",this.currentIndex=t,this.currentId=this.categoryData[t].id,this.disabled1(!0),this.editForm.firstItem=this.categoryData[t].category_name,this.editForm.secondItem="",this.showSeccategory(!0)},firstItemEdit:function(t){this.buttonType="editFirstItem",this.currentIndex=t,this.currentId=this.categoryData[t].id,this.disabledAll(!1),this.editForm.firstItem=this.categoryData[t].category_name,this.showSeccategory(!1)},secondItemEdit:function(t,e){this.buttonType="editSecondItem",this.currentIndex=t,this.currentId=this.categoryData[t].children[e].id,this.disabled1(!0),this.editForm.firstItem=this.categoryData[t].category_name,this.editForm.secondItem=this.categoryData[t].children[e].category_name,this.showSeccategory(!0)},deleteCategory:function(t){var e=this,s={categoryId:t};this.$confirm("确定删除此消息","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then((function(){Object(r["d"])(s).then((function(t){e.$message.success({message:t.data.message,showClose:!0}),e.getCategoryAll()}))})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},resetForm:function(){this.editForm.firstItem="",this.editForm.secondItem=""},editFormInfo:function(){if("addFirstItem"===this.buttonType){var t={categoryName:this.editForm.firstItem};this.addFirstCategory(t)}if("editFirstItem"===this.buttonType){var e={id:this.currentId,categoryName:this.editForm.firstItem};this.editCategory(e,1)}if("addChildren"===this.buttonType){var s={parentId:this.currentId,categoryName:this.editForm.secondItem};this.addChildrenCategory(s)}if("editSecondItem"===this.buttonType){var i={id:this.currentId,categoryName:this.editForm.secondItem};this.editCategory(i,2)}},getCategoryAll:function(){var t=this;this.$store.dispatch("info/getCategoryAll").then((function(e){t.categoryData=e})).catch((function(t){console.log(t)}))},addFirstCategory:function(t){var e=this;""!==this.editForm.firstItem?Object(r["b"])(t).then((function(t){e.$message.success({message:t.data.message,showClose:!0}),e.getCategoryAll(),e.resetForm()})):this.$message.error({message:"分类名称不能为空",showClose:!0})},editCategory:function(t,e){var s=this;""!==this.editForm.firstItem?Object(r["f"])(t).then((function(t){s.$message.success({message:t.data.message,showClose:!0}),s.getCategoryAll(),1===e&&s.resetForm(),2===e&&(s.editForm.secondItem="")})):this.$message.error({message:"分类名称不能为空",showClose:!0})},addChildrenCategory:function(t){var e=this;""!==this.editForm.secondItem?Object(r["a"])(t).then((function(t){e.$message.success({message:t.data.message,showClose:!0}),e.getCategoryAll(),e.editForm.secondItem=""})):this.$message.error({message:"分类名称不能为空",showClose:!0})}},mounted:function(){this.getCategoryAll()}},c=n,d=(s("7ef4"),s("2877")),m=Object(d["a"])(c,i,o,!1,null,"6f9c16b6",null);e["default"]=m.exports}}]);