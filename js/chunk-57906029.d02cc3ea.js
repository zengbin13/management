(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-57906029"],{1276:function(e,t,a){"use strict";var n=a("d784"),i=a("44e7"),r=a("825a"),o=a("1d80"),l=a("4840"),s=a("8aa5"),c=a("50c4"),u=a("14c3"),d=a("9263"),f=a("d039"),h=[].push,p=Math.min,m=4294967295,g=!f((function(){return!RegExp(m,"y")}));n("split",2,(function(e,t,a){var n;return n="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,a){var n=String(o(this)),r=void 0===a?m:a>>>0;if(0===r)return[];if(void 0===e)return[n];if(!i(e))return t.call(n,e,r);var l,s,c,u=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),p=0,g=new RegExp(e.source,f+"g");while(l=d.call(g,n)){if(s=g.lastIndex,s>p&&(u.push(n.slice(p,l.index)),l.length>1&&l.index<n.length&&h.apply(u,l.slice(1)),c=l[0].length,p=s,u.length>=r))break;g.lastIndex===l.index&&g.lastIndex++}return p===n.length?!c&&g.test("")||u.push(""):u.push(n.slice(p)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,a){var i=o(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,i,a):n.call(String(i),t,a)},function(e,i){var o=a(n,e,this,i,n!==t);if(o.done)return o.value;var d=r(e),f=String(this),h=l(d,RegExp),b=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(g?"y":"g"),y=new h(g?d:"^(?:"+d.source+")",v),C=void 0===i?m:i>>>0;if(0===C)return[];if(0===f.length)return null===u(y,f)?[f]:[];var D=0,O=0,_=[];while(O<f.length){y.lastIndex=g?O:0;var k,w=u(y,g?f:f.slice(O));if(null===w||(k=p(c(y.lastIndex+(g?0:O)),f.length))===D)O=s(f,O,b);else{if(_.push(f.slice(D,O)),_.length===C)return _;for(var E=1;E<=w.length-1;E++)if(_.push(w[E]),_.length===C)return _;O=D=k}}return _.push(f.slice(D)),_}]}),!g)},2934:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return o}));var n=a("b775");function i(e){return n["a"].request({url:"/uploadImgToken/",method:"POST",data:e})}function r(e){return n["a"].request({method:e.method||"post",url:e.url,data:e.data||{}})}function o(e){return n["a"].request({url:"/cityPicker/",method:"POST",data:e})}},3986:function(e,t,a){"use strict";var n=a("6786"),i=a.n(n);i.a},6786:function(e,t,a){},"7d73":function(e,t,a){},9419:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user"},[a("el-form",{attrs:{"label-width":"70px",inline:"",model:e.userForm,"label-position":"left"}},[a("el-form-item",{attrs:{label:"分类 :"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.userForm.selected,callback:function(t){e.$set(e.userForm,"selected",t)},expression:"userForm.selected"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入搜索内容"},model:{value:e.userForm.input,callback:function(t){e.$set(e.userForm,"input",t)},expression:"userForm.input"}})],1),a("el-form-item",[a("el-button",{staticClass:"btn",attrs:{type:"primary"}},[e._v("搜索")])],1),a("el-form-item",{staticClass:"pull-right"},[a("el-button",{staticClass:"btn",attrs:{type:"danger"},on:{click:function(t){return e.addUserData()}}},[e._v("添加用户")])],1)],1),a("base-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{tableData:e.tableData,"table-config":e.tableConfig},on:{"selection-change":e.handleChange},scopedSlots:e._u([{key:"status",fn:function(t){return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"2","inactive-value":"1"},on:{change:function(a){return e.userActives(t.data.id,a)}},model:{value:t.data.status,callback:function(a){e.$set(t.data,"status",a)},expression:"props.data.status"}})]}},{key:"operation",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.editUserData(t.data)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.deleteUserData(t.data.id)}}},[e._v("删除")])]}},{key:"delete",fn:function(){return[a("el-button",{staticClass:"pull-left",attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.handleDeleteAll()}}},[e._v("批量删除")])]},proxy:!0}])}),a("add-user",{attrs:{"add-user-dialog":e.addUserDialog,editData:e.editData},on:{"update:addUserDialog":function(t){e.addUserDialog=t},"update:add-user-dialog":function(t){e.addUserDialog=t},"add-edit":function(t){return e.getList()}}})],1)},i=[],r=(a("4160"),a("ac1f"),a("1276"),a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"新增",visible:e.flag,width:"40%"},on:{"update:visible":function(t){e.flag=t},close:function(t){return e.cancel()}}},[a("el-form",{ref:"addForm",attrs:{model:e.addForm,"label-width":"80px",rules:e.rules,"status-icon":""}},[a("el-form-item",{attrs:{label:"用户名 :",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入邮箱地址"},model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),a("el-form-item",{attrs:{label:"密码 :",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入6-20位数字＋字母的组合密码",type:"password",minlength:"6",maxlength:"20"},model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),a("el-form-item",{attrs:{label:"姓名 :"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.addForm.truename,callback:function(t){e.$set(e.addForm,"truename",t)},expression:"addForm.truename"}})],1),a("el-form-item",{attrs:{label:"手机号 :"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:e.addForm.phone,callback:function(t){e.$set(e.addForm,"phone",t)},expression:"addForm.phone"}})],1),a("el-form-item",{attrs:{label:"地区 :"}},[a("city-picker",{attrs:{region:e.addForm.region},on:{"region-data":e.getRegion}})],1),a("el-form-item",{attrs:{label:"是否启用 :"}},[a("el-radio",{attrs:{label:"1"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},[e._v("禁用")]),a("el-radio",{attrs:{label:"2"},model:{value:e.addForm.status,callback:function(t){e.$set(e.addForm,"status",t)},expression:"addForm.status"}},[e._v("启用")])],1),a("el-form-item",{attrs:{label:"角色 :"}},[a("el-checkbox-group",{model:{value:e.addForm.role,callback:function(t){e.$set(e.addForm,"role",t)},expression:"addForm.role"}},e._l(e.roles,(function(e){return a("el-checkbox",{key:e.key,attrs:{label:e.label}})})),1)],1)],1),a("span",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.submit()}}},[e._v("确 定")])],1)],1)],1)}),o=[],l=(a("a15b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticStyle:{overflow:"hidden"},attrs:{gutter:15}},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleProvince},model:{value:e.province,callback:function(t){e.province=t},expression:"province"}},e._l(e.provinceOptions,(function(e){return a("el-option",{key:e.PROVINCE_CODE,attrs:{label:e.PROVINCE_NAME,value:e.PROVINCE_CODE}})})),1)],1),a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleCity},model:{value:e.city,callback:function(t){e.city=t},expression:"city"}},e._l(e.cityOptions,(function(e){return a("el-option",{key:e.CITY_CODE,attrs:{label:e.CITY_NAME,value:e.CITY_CODE}})})),1)],1),a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleArea},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}},e._l(e.areaOptions,(function(e){return a("el-option",{key:e.AREA_CODE,attrs:{label:e.AREA_NAME,value:e.AREA_CODE}})})),1)],1)],1)}),s=[],c=(a("b64b"),a("2934")),u={name:"CityPicker",props:{region:{type:Object,default:function(){}}},data:function(){return{province:"",city:"",area:"",provinceOptions:[],cityOptions:[{CITY_CODE:0,CITY_NAME:"空"}],areaOptions:[{AREA_CODE:0,AREA_NAME:"空"}]}},watch:{region:function(e){var t=this;0!==Object.keys(e).length&&(console.log(e),this.province=e.province,this.city=e.city,this.area=e.area,Object(c["a"])({type:"city",province_code:this.province}).then((function(e){t.cityOptions=e.data.data.data})),Object(c["a"])({type:"area",city_code:this.city}).then((function(e){t.areaOptions=e.data.data.data})))}},methods:{getCityNames:function(e){var t=this;Object(c["a"])(e).then((function(e){t.provinceOptions=e.data.data.data}))},handleProvince:function(){var e=this;this.city="",this.cityOptions=[{CITY_CODE:0,CITY_NAME:"空"}],this.area="",this.areaOptions=[{AREA_CODE:0,AREA_NAME:"空"}],Object(c["a"])({type:"city",province_code:this.province}).then((function(t){e.cityOptions=t.data.data.data}))},handleCity:function(){var e=this;this.area="",this.areaOptions=[{AREA_CODE:0,AREA_NAME:"空"}],Object(c["a"])({type:"area",city_code:this.city}).then((function(t){e.areaOptions=t.data.data.data}))},handleArea:function(){var e={province:this.province,city:this.city,area:this.area};this.$emit("region-data",e)}},mounted:function(){this.getCityNames({type:"province"})}},d=u,f=a("2877"),h=Object(f["a"])(d,l,s,!1,null,"fa001930",null),p=h.exports,m=a("b775");function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m["a"].request({method:"post",url:"/user/getList/",data:e})}function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m["a"].request({method:"post",url:"/user/add/",data:e})}function v(e){return m["a"].request({method:"post",url:"/user/delete/",data:e})}function y(e){return m["a"].request({method:"post",url:"/user/actives/",data:e})}function C(e){return m["a"].request({method:"post",url:"/user/edit/",data:e})}var D=a("61f72"),O={name:"AddUser",components:{CityPicker:p},props:{addUserDialog:{type:Boolean,default:!1},editData:{type:Object,default:function(){}}},data:function(){var e=function(e,t,a){""===t?a(new Error("请输入用户名")):Object(D["c"])(t)?a():a(new Error("用户名格式有误"))},t=function(e,t,a){""===t?a(new Error("请输入密码")):Object(D["d"])(t)?a():a(new Error("密码格式有误"))};return{flag:!1,addForm:{btnPerm:"",id:"",username:"",password:"",truename:"",phone:"",region:"",status:"",role:[]},options:[{label:"地方",value:"1"}],roles:[{label:"系统管理员"},{label:"信息管理员"},{label:"用户管理员"}],rules:{username:{validator:e,trigger:"blur"},password:{validator:t,trigger:"blur"}}}},watch:{addUserDialog:function(e){this.flag=e},editData:function(e){Object.assign(this.addForm,e),"string"===typeof this.addForm.region&&(this.addForm.region=JSON.parse(this.addForm.region))}},methods:{cancel:function(){this.$emit("update:addUserDialog",!1)},submit:function(){var e=this;this.$refs.addForm.validate((function(t){if(!t)return e.$message.error({message:"表单数据有误"}),!1;var a=Object.assign({},e.addForm);"string"!==typeof a.region&&(a.region=JSON.stringify(a.region)),a.role=a.role.join(),""===e.editData.id?e.userAdd(a):e.userEdit(a)}))},getRegion:function(e){this.addForm.region=e},userAdd:function(e){var t=this;b(e).then((function(e){t.$emit("add-edit"),t.$message.success({message:e.data.message,showClose:!0})}))},userEdit:function(e){var t=this;C(e).then((function(e){t.$emit("add-edit"),t.$message.success({message:e.data.message,showClose:!0})}))}}},_=O,k=(a("3986"),Object(f["a"])(_,r,o,!1,null,"d8797d18",null)),w=k.exports,E=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{attrs:{data:e.tableData,border:"",stripe:""},on:{"selection-change":e.handleChange}},[e.tableConfig.selection?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.tableConfig.theadData,(function(t){return["slot"===t.columnType?a("el-table-column",{key:t.field,attrs:{prop:t.field,label:t.label,width:t.width},scopedSlots:e._u([{key:"default",fn:function(a){return[e._t(t.slotName,null,{data:a.row})]}}],null,!0)}):a("el-table-column",{key:t.label,attrs:{prop:t.field,label:t.label,width:t.width}})]}))],2),a("div",{staticClass:"footer clearfix"},[e._t("delete"),a("el-pagination",{staticClass:"pull-right",attrs:{background:"",layout:"prev, pager, next",total:e.tableConfig.total}})],2)],1)},A=[],F={name:"base-table",props:{tableData:{type:Array,default:function(){return[]}},tableConfig:{type:Object,default:function(){}}},data:function(){return{}},methods:{loadTableData:function(){var e={url:this.tableConfig.requestConfig.url,data:this.config.requestConfig.requestData};Object(c["b"])(e).then((function(e){console.log(e)}))},handleChange:function(e){this.$emit("selection-change",e)}}},x=F,$=(a("f680"),Object(f["a"])(x,E,A,!1,null,"04916fc8",null)),j=$.exports,U={name:"User",components:{AddUser:w,BaseTable:j},data:function(){return{loading:!1,requestData:{username:"",truename:"",phone:"",pageNumber:1,pageSize:10},userForm:{selected:"",input:""},options:[{label:"手机号码",value:"phone"},{label:"姓名",value:"name"},{label:"邮箱",value:"email"}],addUserDialog:!1,tableData:[],tableConfig:{total:0,selection:!0,theadData:[{label:"用户名",field:"username"},{label:"真实姓名",field:"truename",width:"120"},{label:"手机号",field:"phone",width:"200"},{label:"角色",field:"role",width:"220"},{label:"禁启用状态",field:"status",width:"120",columnType:"slot",slotName:"status"},{label:"操作",field:"operation",columnType:"slot",slotName:"operation"}]},selectedItem:[],editData:{},provinceList:[]}},methods:{handleAddUser:function(){this.addUserDialog=!this.addUserDialog},addUserData:function(){this.editData={btnPerm:"",id:"",username:"",password:"",truename:"",phone:"",region:{},status:"",role:[]},this.handleAddUser()},editUserData:function(e){"string"===typeof e.role&&(e.role=e.role.split(",")),this.editData=e,this.handleAddUser()},deleteUserData:function(e){this.confirm({desc:"删除该条信息, 是否继续?",success:this.userDel,successData:{id:[e]}})},handleDeleteAll:function(){0!==this.selectedItem.length?(this.confirm({desc:"此操作将永久删除选中信息, 是否继续?",tip:"警告",success:this.userDel,successData:{id:this.selectedItem}}),this.getList()):this.$message.info({message:"请选择需要删除的数据",showClose:!0})},handleChange:function(e){var t=this;this.selectedItem=[],e.forEach((function(e){t.selectedItem.push(e.id)}))},getList:function(){var e=this;this.loading=!0,g(this.requestData).then((function(t){e.tableData=t.data.data.data,e.tableConfig.total=t.data.data.total,e.loading=!1}))},userDel:function(e){v(e).then((function(e){console.log(e)})),this.getList()},userActives:function(e,t){var a=this,n={id:e,status:t};y(n).then((function(e){a.$message.success({message:e.data.message,showClose:!0})}))}},mounted:function(){this.getList()}},I=U,N=(a("e448"),Object(f["a"])(I,n,i,!1,null,"ba57c370",null));t["default"]=N.exports},a15b:function(e,t,a){"use strict";var n=a("23e7"),i=a("44ad"),r=a("fc6a"),o=a("a640"),l=[].join,s=i!=Object,c=o("join",",");n({target:"Array",proto:!0,forced:s||!c},{join:function(e){return l.call(r(this),void 0===e?",":e)}})},b64b:function(e,t,a){var n=a("23e7"),i=a("7b0b"),r=a("df75"),o=a("d039"),l=o((function(){r(1)}));n({target:"Object",stat:!0,forced:l},{keys:function(e){return r(i(e))}})},e448:function(e,t,a){"use strict";var n=a("eb73"),i=a.n(n);i.a},eb73:function(e,t,a){},f680:function(e,t,a){"use strict";var n=a("7d73"),i=a.n(n);i.a}}]);